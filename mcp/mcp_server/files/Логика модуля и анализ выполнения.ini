## –õ–æ–≥–∏–∫–∞ –º–æ–¥—É–ª—è –∏ –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ª–æ–≥–∞—Ö, –º–æ–∂–Ω–æ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø–æ–ª–Ω—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

### üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã**

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **ServerManager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏
2. **MultiServerMCPClient** - –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏
3. **ReAct Agent** - –∞–≥–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ LangGraph —Å ChatOllama
4. **MCP Tools** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ø–æ–∏—Å–∫ + —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏)

### üîÑ **–ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞**

#### **1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—É—Å–ø–µ—à–Ω–∞—è)**
```
‚úÖ –°–µ—Ä–≤–µ—Ä—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ: ['search', 'files']
‚úÖ –ú–æ–¥–µ–ª—å ChatOllama —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]
‚úÖ –ê–≥–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
```

#### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞**
**–ó–∞–ø—Ä–æ—Å:** *"–Ω–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∏ —Å–æ–∑–¥–∞–π –∏–∑ –Ω–µ–µ —Ñ–∞–π–ª weather.txt"*

**–ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–∏–ª —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

### üìã **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**

#### **–®–∞–≥ 1: –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**
```
–°–æ–æ–±—â–µ–Ω–∏–µ 2: ToolMessage
Found 1 search results:
1. Moscow, Moscow, Russia Weather Forecast | AccuWeather
   URL: https://www.accuweather.com/en/ru/moscow/294021/weather-forecast/294021
```
- –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª **search tool** –æ—Ç `search_sever_duckduck_go.py`
- –ù–∞—à–µ–ª —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º –ø–æ–≥–æ–¥—ã

#### **–®–∞–≥ 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
```
–°–æ–æ–±—â–µ–Ω–∏–µ 4: ToolMessage  
Moscow, Moscow, Russia Weather Forecast | AccuWeather
Current Weather 1:32 PM 26¬∞C
10-Day Weather Forecast...
```
- –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –ø–æ–ª–Ω—ã–π HTML-–∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ò–∑–≤–ª–µ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ

#### **–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞**
```
–°–æ–æ–±—â–µ–Ω–∏–µ 6: ToolMessage
–§–∞–π–ª 'weather.txt' —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ E:\agent_mcp-main\mcp_server\files\weather.txt
```
- –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª **file tool** –æ—Ç `server_2.py`
- –°–æ–∑–¥–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø–æ–≥–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### üß† **–õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –∞–≥–µ–Ω—Ç–∞**

–ò–∑ —Å–æ–æ–±—â–µ–Ω–∏—è 7 –≤–∏–¥–Ω–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞:
```xml
<think>
1. –ü–æ–∏—Å–∫ –ø–æ–≥–æ–¥–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ú–æ—Å–∫–≤—ã
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –Ω–∞–π–¥–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞
</think>
```

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

#### **HTTP-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å Ollama:**
```
HTTP Request: POST http://127.0.0.1:11434/api/chat "HTTP/1.1 200 OK"
```
- 4 –∑–∞–ø—Ä–æ—Å–∞ –∫ –º–æ–¥–µ–ª–∏ qwen3:1.7b
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–∏–º–∞–ª ~1.5-2 —Å–µ–∫—É–Ω–¥—ã
- –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ ReAct (Reasoning + Acting)

#### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**
```python
res = {
    'messages': [
        HumanMessage,    # –ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
        AIMessage,       # –†–µ—à–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –æ –ø–æ–∏—Å–∫–µ
        ToolMessage,     # –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞
        AIMessage,       # –†–µ—à–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        ToolMessage,     # –†–µ–∑—É–ª—å—Ç–∞—Ç fetch_content
        AIMessage,       # –†–µ—à–µ–Ω–∏–µ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞
        ToolMessage,     # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è
        AIMessage        # –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è–º–∏
    ]
}
```

### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**

**–ê–≥–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ:**
1. **–ü–æ–Ω—è–ª** —Å–æ—Å—Ç–∞–≤–Ω—É—é –∑–∞–¥–∞—á—É (–ø–æ–∏—Å–∫ + —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞)
2. **–†–∞–∑–ª–æ–∂–∏–ª** –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
4. **–°–æ–∑–¥–∞–ª** —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### üí° **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
4. **ReAct –ø–∞—Ç—Ç–µ—Ä–Ω**: –ê–≥–µ–Ω—Ç —á–µ—Ä–µ–¥—É–µ—Ç —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è
5. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é MCP (Model Context Protocol) —Å LangGraph –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, 
—Å–ø–æ—Å–æ–±–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏.

---------------------------------------------------
–ê–Ω–∞–ª–∏–∑–∏—Ä—É—è –ª–æ–≥–∏, –≤–∏–¥–Ω–æ **4 HTTP-–∑–∞–ø—Ä–æ—Å–∞ –∫ Ollama (qwen3:1.7b)**. –í–æ—Ç —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:

## üîÑ **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM**

### **–ó–∞–ø—Ä–æ—Å 1** (13:32:32 ‚Üí 13:32:33)
```json
{
  "model": "qwen3:1.7b",
  "messages": [
    {
      "role": "user", 
      "content": "–Ω–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∏ —Å–æ–∑–¥–∞–π –∏–∑ –Ω–µ–µ —Ñ–∞–π–ª weather.txt"
    }
  ],
  "tools": [
    {"name": "search", "description": "–ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ"},
    {"name": "fetch_content", "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"},
    {"name": "create_text_file", "description": "–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞"}
  ]
}
```

**–û—Ç–≤–µ—Ç LLM:** –†–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ "Moscow weather"

---

### **–ó–∞–ø—Ä–æ—Å 2** (13:32:35 ‚Üí 13:32:37)
```json
{
  "model": "qwen3:1.7b",
  "messages": [
    {
      "role": "user", 
      "content": "–Ω–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∏ —Å–æ–∑–¥–∞–π –∏–∑ –Ω–µ–µ —Ñ–∞–π–ª weather.txt"
    },
    {
      "role": "assistant",
      "content": "–Ø –±—É–¥—É –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ",
      "tool_calls": [{"name": "search", "arguments": {"query": "Moscow weather"}}]
    },
    {
      "role": "tool",
      "content": "Found 1 search results:\n1. Moscow, Moscow, Russia Weather Forecast | AccuWeather\nURL: https://www.accuweather.com/en/ru/moscow/294021/weather-forecast/294021\nSummary: Get the current weather and 10-day outlook for Moscow..."
    }
  ]
}
```

**–û—Ç–≤–µ—Ç LLM:** –†–µ—à–µ–Ω–∏–µ –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã AccuWeather

---

### **–ó–∞–ø—Ä–æ—Å 3** (13:32:38 ‚Üí 13:32:40)
```json
{
  "model": "qwen3:1.7b", 
  "messages": [
    // ... –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è ...
    {
      "role": "assistant",
      "content": "–¢–µ–ø–µ—Ä—å –ø–æ–ª—É—á—É –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã",
      "tool_calls": [{"name": "fetch_content", "arguments": {"url": "https://www.accuweather.com/en/ru/moscow/294021/weather-forecast/294021"}}]
    },
    {
      "role": "tool",
      "content": "Moscow, Moscow, Russia Weather Forecast | AccuWeather... Current Weather 1:32 PM 26¬∞C RealFeel¬Æ 26¬∞ Sunny... 10-Day Weather Forecast Today 5/28 28¬∞ 15¬∞ Sunny, breezy..."
    }
  ]
}
```

**–û—Ç–≤–µ—Ç LLM:** –†–µ—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–≥–æ–¥–µ

---

### **–ó–∞–ø—Ä–æ—Å 4** (13:32:40 ‚Üí 13:32:42)
```json
{
  "model": "qwen3:1.7b",
  "messages": [
    // ... –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è ...
    {
      "role": "assistant", 
      "content": "–°–æ–∑–¥–∞–º —Ñ–∞–π–ª weather.txt —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π",
      "tool_calls": [{
        "name": "create_text_file",
        "arguments": {
          "filename": "weather.txt",
          "content": "Moscow Weather Forecast\n\nCurrent Temperature: 26¬∞C\n\n10-Day Forecast:\n- May 28: 28¬∞C (Sunny, breezy)..."
        }
      }]
    },
    {
      "role": "tool",
      "content": "–§–∞–π–ª 'weather.txt' —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ E:\\agent_mcp-main\\mcp_server\\files\\weather.txt"
    }
  ]
}
```

**–û—Ç–≤–µ—Ç LLM:** –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

---

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**

| –ó–∞–ø—Ä–æ—Å | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------------|------------|
| #1 | ~1.3 —Å–µ–∫ | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –≤—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |
| #2 | ~1.6 —Å–µ–∫ | –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞ |
| #3 | ~2.2 —Å–µ–∫ | –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ |
| #4 | ~1.7 —Å–µ–∫ | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~6.8 —Å–µ–∫—É–Ω–¥

## üß† **–õ–æ–≥–∏–∫–∞ LLM –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ**

### **ReAct Pattern (Reasoning + Acting):**

1. **Thought** ‚Üí –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏: "–ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ–≥–æ–¥—É –≤ –ú–æ—Å–∫–≤–µ –ò —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª"
2. **Action** ‚Üí –ü–æ–∏—Å–∫: `search("Moscow weather")`
3. **Observation** ‚Üí –ù–∞–π–¥–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ AccuWeather
4. **Thought** ‚Üí "–ù—É–∂–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã"  
5. **Action** ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: `fetch_content(url)`
6. **Observation** ‚Üí –ü–æ–ª—É—á–µ–Ω HTML —Å –ø–æ–≥–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
7. **Thought** ‚Üí "–ù—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª"
8. **Action** ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞: `create_text_file("weather.txt", formatted_content)`
9. **Observation** ‚Üí –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
10. **Thought** ‚Üí "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç"

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è**

- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- **Tool calling**: LLM —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- **–ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞–∑–±–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–æ–≤ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 
ReAct-–ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π.
-----------------------------------------------------------
–ê–Ω–∞–ª–∏–∑–∏—Ä—É—è –ª–æ–≥–∏ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤–æ—Ç **—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ MCP —Å–µ—Ä–≤–µ—Ä–∞–º**:

## üîç **–ó–∞–ø—Ä–æ—Å—ã –∫ –ø–æ–∏—Å–∫–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É** (`search_sever_duckduck_go.py`)

### **–ó–∞–ø—Ä–æ—Å 1: –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–≥–æ–¥–µ**
```json
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "search",
    "arguments": {
      "query": "Moscow weather"
    }
  },
  "id": "tool_call_1"
}
```

**–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:**
```json
{
  "jsonrpc": "2.0", 
  "result": {
    "content": [
      {
        "type": "text",
        "text": "Found 1 search results:\n\n1. Moscow, Moscow, Russia Weather Forecast | AccuWeather\n   URL: https://www.accuweather.com/en/ru/moscow/294021/weather-forecast/294021\n   Summary: Get the currentweatherand 10-day outlook forMoscow, Russia, including temperature, precipitation, wind, and air quality. See radar maps, sun and moon times, and allergy outlook forMoscow."
      }
    ]
  },
  "id": "tool_call_1"
}
```

### **–ó–∞–ø—Ä–æ—Å 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
```json
{
  "jsonrpc": "2.0",
  "method": "tools/call", 
  "params": {
    "name": "fetch_content",
    "arguments": {
      "url": "https://www.accuweather.com/en/ru/moscow/294021/weather-forecast/294021"
    }
  },
  "id": "tool_call_2"
}
```

**–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:**
```json
{
  "jsonrpc": "2.0",
  "result": {
    "content": [
      {
        "type": "text", 
        "text": "Moscow, Moscow, Russia Weather Forecast | AccuWeather Go Back For Business | Warnings Forecasts Data Suite Forensics Local Media Moscow, Moscow 26¬∞C Location... Current Weather 1:32 PM 26¬∞C RealFeel¬Æ 26¬∞ Sunny... 10-Day Weather Forecast Today 5/28 28¬∞ 15¬∞ Sunny, breezy and very warm..."
      }
    ]
  },
  "id": "tool_call_2"
}
```

---

## üìÅ **–ó–∞–ø—Ä–æ—Å—ã –∫ —Ñ–∞–π–ª–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É** (`server_2.py`)

### **–ó–∞–ø—Ä–æ—Å 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ weather.txt**
```json
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "create_text_file",
    "arguments": {
      "filename": "weather.txt",
      "content": "Moscow Weather Forecast\n\nCurrent Temperature: 26¬∞C\nRealFeel¬Æ: 26¬∞\nConditions: Sunny\nWind: SE 28 km/h\nAir Quality: Poor\n\n10-Day Weather Forecast:\n- Today (May 28): High 28¬∞C, Low 15¬∞C - Sunny, breezy and very warm\n- Thu (May 29): High 29¬∞C, Low 18¬∞C - Clouds and sun; breezy, warm  \n- Fri (May 30): High 26¬∞C, Low 15¬∞C - Cloudy, a shower in the p.m.\n- Sat (May 31): High 25¬∞C, Low 14¬∞C - Some rain and a thunderstorm\n- Sun (June 1): High 22¬∞C, Low 13¬∞C - Mostly sunny and pleasant\n- Mon (June 2): High 24¬∞C, Low 14¬∞C - Mostly sunny and delightful\n- Tue (June 3): High 22¬∞C, Low 13¬∞C - A couple of afternoon showers\n- Wed (June 4): High 24¬∞C, Low 15¬∞C - Partly sunny\n- Thu (June 5): High 26¬∞C, Low 17¬∞C - Partly sunny and very warm\n- Fri (June 6): High 23¬∞C, Low 14¬∞C - A little afternoon rain\n\nSun & Moon:\n- Sunrise: 3:58 AM\n- Sunset: 8:56 PM\n- Daylight: 16 hrs 58 mins\n\nData source: AccuWeather"
    }
  },
  "id": "tool_call_3"
}
```

**–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:**
```json
{
  "jsonrpc": "2.0",
  "result": {
    "content": [
      {
        "type": "text",
        "text": "–§–∞–π–ª 'weather.txt' —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ E:\\agent_mcp-main\\mcp_server\\files\\weather.txt"
      }
    ]
  },
  "id": "tool_call_3"
}
```

---

## üìä **–°–≤–æ–¥–∫–∞ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º**

### **Search Server** (`search_sever_duckduck_go.py`)
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------------|-----------|-----------|
| `search` | `query: "Moscow weather"` | 1 —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç AccuWeather |
| `fetch_content` | `url: AccuWeather URL` | –ü–æ–ª–Ω—ã–π HTML-–∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |

### **File Server** (`server_2.py`)  
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------------|-----------|-----------|
| `create_text_file` | `filename: "weather.txt"`<br>`content: [—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ]` | –§–∞–π–ª —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ |

---

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**

### **–ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:**
- **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç:** stdio (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** JSON-RPC 2.0
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8
- **–§–æ—Ä–º–∞—Ç:** –°—Ç—Ä–æ–∫–æ–≤—ã–µ JSON-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏

### **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:**
1. **Agent** ‚Üí **MCP Client**: –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
2. **MCP Client** ‚Üí **MCP Server**: JSON-RPC –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ stdio
3. **MCP Server**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ–∏—Å–∫/—Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞)
4. **MCP Server** ‚Üí **MCP Client**: JSON-RPC –æ—Ç–≤–µ—Ç
5. **MCP Client** ‚Üí **Agent**: –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
6. **Agent** ‚Üí **LLM**: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤–µ—Ä–Ω—É–ª–∏ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (`"jsonrpc": "2.0"`)
- –ù–µ –±—ã–ª–æ timeout'–æ–≤ –∏–ª–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
- –§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Ä–∞–±–æ—Ç—É MCP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-RPC –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.